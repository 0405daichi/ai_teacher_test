<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
   <title>Bootstrap Modal demo</title>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <!-- JSファイル読み込み -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</head>

<body>
  <div id="survey-modal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">アンケート</h5>
        </div>
        <div class="modal-body" style="overflow: scroll;">
          <form id="survey-form">
            <div class="form-group">
              <label for="user-feedback">サービスに関して気になることや改善して欲しいことはありますか？</label>
              <textarea class="form-control" id="user-feedback" rows="3" placeholder="あなたの意見をお聞かせください"></textarea>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="feedbackOption" id="noConcern" value="特にない">
              <label class="form-check-label" for="noConcern">
                特にない
              </label>
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-primary" id="submit-button" disabled>送信</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#survey-modal">
    Launch static backdrop modal
  </button>
</body>
</html>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const feedbackTextArea = document.getElementById('user-feedback');
    const noConcernRadio = document.getElementById('noConcern');
    const submitButton = document.getElementById('submit-button');
    
    function updateSubmitButtonState() {
      // テキストエリアにテキストが入力されているか、"特にない"が選択されているかをチェック
      if (feedbackTextArea.value.trim() !== "" || noConcernRadio.checked) {
        submitButton.disabled = false; // 送信ボタンを有効にする
      } else {
        submitButton.disabled = true; // 送信ボタンを無効にする
      }
    }

    function deactivateRadioIfTextareaIsActive() {
      if (feedbackTextArea.value.trim() !== "") {
        noConcernRadio.checked = false; // テキストエリアがアクティブならラジオボタンの選択を解除
        updateSubmitButtonState(); // 送信ボタンの状態を更新
      }
    }
    
    // テキストエリアの入力イベントにリスナーを追加
    feedbackTextArea.addEventListener('input', function() {
      deactivateRadioIfTextareaIsActive();
      updateSubmitButtonState();
    });
    
    // ラジオボタンの変更イベントにリスナーを追加
    noConcernRadio.addEventListener('change', updateSubmitButtonState);
  });
</script>
